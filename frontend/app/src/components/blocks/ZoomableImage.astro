---
import type { ComponentProps } from "astro/types";
type AstroImageOptions = ComponentProps<typeof Image>;

import { Image } from 'astro:assets';

interface Props {
    src:            string;
    alt?:           string;
    astro_image?:   AstroImageOptions;
    [propName: string]: any;
}

const {
    src,
    alt = '',
    astro_image,
    ...attributes
} = Astro.props
---

<figure
    x-data={`{
        init_zoom() {
            mediumZoom($el.children[0], {
                background: 'var(--solid-transparency-background)',
                scrollOffset: 0,
                margin: 24,
                metaClick: false,
            })
        }
    }`}
    x-init="init_zoom()"
>
    {astro_image ?
        <Image
            data-zoomable
            data-zoom-src={src}
            {...attributes}
            {...astro_image}
        /> :
        <img
            data-zoomable
            src={src}
            alt={alt}
            loading="lazy"
            {...attributes}
        />
    }
</figure>

<style lang="scss">
    img {
        min-height: 125px;
    }
</style>